package com.example.plantcare.ui.screens

import androidx.compose.foundation.layout.*
import androidx.compose.foundation.lazy.grid.GridCells
import androidx.compose.foundation.lazy.grid.LazyVerticalGrid
import androidx.compose.foundation.lazy.grid.items
import androidx.compose.material3.*
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.dp
import com.example.plantcare.data.database.entity.EncyclopediaEntry

// --- Улучшенные данные для энциклопедии ---
val encyclopediaEntries = listOf(
    EncyclopediaEntry(
        id = 1,
        name = "Фикус Бенджамина",
        description = "Элегантное комнатное растение с глянцевыми листьями. Идеально для декора помещений. Имеет множество сортов с разной формой и окраской листьев.",
        careRules = "Полив: умеренный, когда верхний слой земли подсохнет. Не терпит переувлажнения. Опрыскивание — умеренное. Регулярная протирка листьев для блеска.",
        climateTips = "Местоположение: яркое, но рассеянное освещение. Избегать прямых солнечных лучей. Температура: 18–24 °C. Не переносит сквозняки и резкие перепады температур."
    ),
    EncyclopediaEntry(
        id = 2,
        name = "Сансевиерия (Щучий хвост)",
        description = "Одно из самых неприхотливых растений. Отлично подходит для начинающих. Очищает воздух от вредных веществ.",
        careRules = "Полив: редкий, только после полного высыхания грунта. Переносит засуху, но не переувлажнение. Растение может обходиться без полива 2–3 недели.",
        climateTips = "Освещение: переносит любое, включая тень. Лучше всего — яркий рассеянный свет. Температура: 16–25 °C. Влажность не важна."
    ),
    EncyclopediaEntry(
        id = 3,
        name = "Хлорофитум",
        description = "Быстро растущее растение с арочными листьями. Известно как один из лучших очистителей воздуха.",
        careRules = "Полив: умеренный, почва не должна пересыхать полностью. Летом — чаще, зимой — реже. Регулярное опрыскивание.",
        climateTips = "Освещение: яркое, но без прямых солнечных лучей. Температура: 15–25 °C. Влажность: умеренная, но не ниже 40%."
    ),
    EncyclopediaEntry(
        id = 4,
        name = "Замиокулькас (Денежное дерево)",
        description = "Суккулент с блестящими перистыми листьями. Символ удачи и процветания. Очень медленно растёт, но очень долговечно.",
        careRules = "Полив: редкий, только после полного высыхания грунта. Не переносит застоя воды. Поливать аккуратно, под корень.",
        climateTips = "Освещение: яркое, может переносить полутень. Температура: 18–26 °C. Влажность не важна. Часто ошибочно называют «денежным деревом», но это не Crassula."
    ),
    EncyclopediaEntry(
        id = 5,
        name = "Каланхоэ",
        description = "Суккулент с мясистыми листьями и яркими соцветиями. Цветёт зимой и весной. Используется в народной медицине.",
        careRules = "Полив: умеренный, почва должна просохнуть между поливами. Зимой — минимальный полив. Не любит опрыскивание.",
        climateTips = "Освещение: яркое, прямые лучи утром и вечером. Температура: 16–24 °C. Влажность: низкая. Требует периода покоя после цветения."
    ),
    EncyclopediaEntry(
        id = 6,
        name = "Алоэ вера",
        description = "Известное лекарственное растение с мясистыми листьями, содержащими целебный сок. Используется в косметике и медицине.",
        careRules = "Полив: редкий, только после полного высыхания. Сокращается зимой. Не переносит переувлажнение.",
        climateTips = "Освещение: яркое, прямые лучи. Температура: 18–24 °C. Влажность: низкая. Растение не любит пересадки."
    ),
    EncyclopediaEntry(
        id = 7,
        name = "Толстянка (Крассула)",
        description = "Суккулент с толстыми, округлыми листьями. Символ удачи. Может цвести белыми или розовыми цветами.",
        careRules = "Полив: редкий, после высыхания грунта. Зимой — минимум. Лучше недолить, чем перелить.",
        climateTips = "Освещение: яркое, прямые лучи. Температура: 15–25 °C. Влажность: низкая. Может цвести при правильном уходе и прохладной зимовке."
    ),
    EncyclopediaEntry(
        id = 8,
        name = "Кактусы (разные виды)",
        description = "Разнообразные суккуленты с колючками. Отлично подходят для сухих помещений. Многие виды цветут ярко.",
        careRules = "Полив: редкий, особенно зимой. Поливать только после полного высыхания. Не опрыскивать!",
        climateTips = "Освещение: яркое, прямые лучи. Температура: 15–25 °C летом, 5–10 °C зимой. Влажность: минимальная."
    ),
    EncyclopediaEntry(
        id = 9,
        name = "Спатифиллум",
        description = "Цветущее растение с белыми початками и блестящими листьями. Известно как «женское счастье».",
        careRules = "Полив: регулярный, но без застоя. Вода должна быть комнатной температуры. Опрыскивание — часто.",
        climateTips = "Освещение: яркое, но без прямых лучей. Температура: 18–23 °C. Влажность: высокая. Не переносит сквозняки."
    ),
    EncyclopediaEntry(
        id = 10,
        name = "Драцена",
        description = "Декоративное растение с узкими листьями. Неприхотливо, хорошо растёт в помещении. Очищает воздух.",
        careRules = "Полив: умеренный, почва слегка подсыхает между поливами. Чувствительна к хлору в воде.",
        climateTips = "Освещение: рассеянное, может расти в полутени. Температура: 18–25 °C. Влажность: умеренная."
    ),
    EncyclopediaEntry(
        id = 11,
        name = "Монстера",
        description = "Тропическое растение с крупными листьями, которые разрезаются с возрастом. Символ джунглей в интерьере.",
        careRules = "Полив: умеренный, почва не должна пересыхать полностью. Опрыскивание — регулярное. Требует подпорки.",
        climateTips = "Освещение: яркое, но без прямых лучей. Температура: 18–25 °C. Влажность: высокая. Растение нуждается в поддержке."
    ),
    EncyclopediaEntry(
        id = 12,
        name = "Пеларгония",
        description = "Цветущее растение с ароматными листьями и яркими соцветиями. Используется в кулинарии и косметике.",
        careRules = "Полив: умеренный, почва должна просохнуть между поливами. Не переносит переувлажнение.",
        climateTips = "Освещение: яркое, прямые лучи. Температура: 15–22 °C летом, 10–15 °C зимой. Влажность: умеренная."
    ),
    EncyclopediaEntry(
        id = 13,
        name = "Орхидея (Фаленопсис)",
        description = "Элегантное цветущее растение с необычными цветами. Считается сложным, но при правильном уходе цветёт часто.",
        careRules = "Полив: 1 раз в 1–2 недели, методом погружения. Не поливать в крону. Использовать мягкую воду.",
        climateTips = "Освещение: яркое, но без прямых лучей. Температура: 18–25 °C. Влажность: высокая. Не переносит сквозняки."
    ),
    EncyclopediaEntry(
        id = 14,
        name = "Папоротник",
        description = "Древнее растение с перистыми листьями. Отлично увлажняет воздух. Подходит для влажных помещений.",
        careRules = "Полив: регулярный, почва не должна пересыхать. Опрыскивание — часто. Лучше использовать поддон с водой.",
        climateTips = "Освещение: рассеянное, тень. Температура: 15–22 °C. Влажность: высокая. Не любит сквозняки."
    ),
    EncyclopediaEntry(
        id = 15,
        name = "Фиалка (Узамбарская)",
        description = "Маленькое растение с бархатистыми листьями и яркими цветами. Цветёт почти круглый год.",
        careRules = "Полив: под корень, не мокрить листья. Вода — комнатной температуры. Регулярная подкормка.",
        climateTips = "Освещение: яркое, но без прямых лучей. Температура: 18–24 °C. Влажность: умеренная. Не переносит сквозняки."
    ),
    EncyclopediaEntry(
        id = 16,
        name = "Эпипремнум",
        description = "Быстрорастущая лиана с сердцевидными листьями. Идеально для вертикального озеленения.",
        careRules = "Полив: умеренный, почва слегка подсыхает между поливами. Регулярная обрезка для пышности.",
        climateTips = "Освещение: любое, кроме прямых лучей. Температура: 18–25 °C. Влажность: умеренная. Не токсично для человека, но вредно для животных."
    ),
    EncyclopediaEntry(
        id = 17,
        name = "Крассула (Монетное дерево)",
        description = "Суккулент с округлыми листьями, напоминающими монеты. Символ удачи и богатства.",
        careRules = "Полив: редкий, почва должна полностью высохнуть. Не переносит застоя воды.",
        climateTips = "Освещение: яркое, прямые лучи. Температура: 15–25 °C. Влажность: низкая. Растение не любит пересадки."
    ),
    EncyclopediaEntry(
        id = 18,
        name = "Аспарагус",
        description = "Пышное растение с тонкими, перистыми побегами. Используется как ампельное или настольное растение.",
        careRules = "Полив: регулярный, почва не должна пересыхать. Частое опрыскивание. Умеренная подкормка.",
        climateTips = "Освещение: рассеянное, яркое. Температура: 15–22 °C. Влажность: умеренная. Не переносит сухой воздух."
    ),
    EncyclopediaEntry(
        id = 19,
        name = "Циперус",
        description = "Растение, которое может расти в воде. Используется как ампельное или для озеленения аквариумов.",
        careRules = "Полив: частый, можно держать в поддоне с водой. Почва всегда влажная. Регулярное опрыскивание.",
        climateTips = "Освещение: яркое, но без прямых лучей. Температура: 18–25 °C. Влажность: высокая. Не переносит сухой воздух."
    ),
    EncyclopediaEntry(
        id = 20,
        name = "Гибискус",
        description = "Цветущее кустистое растение с крупными яркими цветами. Цветёт летом, требует зимнего отдыха.",
        careRules = "Полив: обильный летом, умеренный зимой. Регулярная обрезка для пышного цветения.",
        climateTips = "Освещение: яркое, прямые лучи. Температура: 18–25 °C летом, 10–15 °C зимой. Влажность: умеренная."
    ),
    EncyclopediaEntry(
        id = 21,
        name = "Бегония",
        description = "Цветущее или декоративно-лиственное растение с разнообразной окраской листьев. Цветёт ярко.",
        careRules = "Полив: умеренный, не мокрить листья. Не переносит застоя воды. Опрыскивание — осторожно.",
        climateTips = "Освещение: яркое, но без прямых лучей. Температура: 18–22 °C. Влажность: умеренная. Не переносит сквозняки."
    ),
    EncyclopediaEntry(
        id = 22,
        name = "Фатсия японская",
        description = "Декоративное растение с крупными лопастными листьями. Подходит для тенистых мест.",
        careRules = "Полив: умеренный, почва слегка подсыхает между поливами. Опрыскивание — умеренное.",
        climateTips = "Освещение: полутень. Температура: 15–22 °C. Влажность: умеренная. Не переносит жару и сухой воздух."
    ),
    EncyclopediaEntry(
        id = 23,
        name = "Комнатный виноград (Плющ)",
        description = "Ампельное растение с декоративными листьями. Используется для вертикального озеленения.",
        careRules = "Полив: умеренный, почва не должна пересыхать полностью. Регулярная обрезка для пышности.",
        climateTips = "Освещение: любое, кроме прямых лучей. Температура: 15–25 °C. Влажность: умеренная. Вредно для животных."
    ),
    EncyclopediaEntry(
        id = 24,
        name = "Маранта",
        description = "Растение, которое «спит» ночью — листья складываются. Известно яркими узорами на листьях.",
        careRules = "Полив: регулярный, почва не должна пересыхать. Высокая влажность обязательна.",
        climateTips = "Освещение: рассеянное. Температура: 20–25 °C. Влажность: высокая. Не переносит сквозняки и сухой воздух."
    ),
    EncyclopediaEntry(
        id = 25,
        name = "Нолина",
        description = "Необычное растение с бутылочным стволом, в котором запасает воду. Очень неприхотливо.",
        careRules = "Полив: редкий, только после полного высыхания. Зимой — минимум. Не переносит переувлажнение.",
        climateTips = "Освещение: яркое, прямые лучи. Температура: 15–25 °C. Влажность: низкая. Растёт медленно."
    ),
    EncyclopediaEntry(
        id = 26,
        name = "Эухарис",
        description = "Цветущее растение с крупными белыми цветами, похожими на лилии. Цветёт 2–3 раза в год.",
        careRules = "Полив: умеренный, почва слегка подсыхает между поливами. Не переносит переувлажнение.",
        climateTips = "Освещение: рассеянное, без прямых лучей. Температура: 18–24 °C. Влажность: умеренная. Вредно для животных."
    ),
    EncyclopediaEntry(
        id = 27,
        name = "Пахистахис",
        description = "Яркое цветущее растение с оранжевыми или желтыми соцветиями. Используется как декоративное.",
        careRules = "Полив: умеренный, почва не должна пересыхать. Регулярная обрезка для пышности.",
        climateTips = "Освещение: яркое, но без прямых лучей. Температура: 18–24 °C. Влажность: умеренная. Не переносит холод."
    ),
    EncyclopediaEntry(
        id = 28,
        name = "Стрептокарпус",
        description = "Цветущее растение с крупными фиалковыми цветами. Схоже с фиалкой, но крупнее и дольше цветёт.",
        careRules = "Полив: умеренный, под корень. Не мокрить листья. Регулярная подкормка.",
        climateTips = "Освещение: яркое, но без прямых лучей. Температура: 18–24 °C. Влажность: умеренная. Безопасно для животных."
    ),
    EncyclopediaEntry(
        id = 29,
        name = "Церопегия",
        description = "Необычное ампельное растение с трубчатыми цветами. Используется как декоративное.",
        careRules = "Полив: редкий, почва должна полностью высохнуть. Не переносит переувлажнение.",
        climateTips = "Освещение: яркое, прямые лучи утром. Температура: 18–25 °C. Влажность: низкая. Безопасно для животных."
    ),
    EncyclopediaEntry(
        id = 30,
        name = "Медвежье ушко",
        description = "Суккулент с пушистыми листьями, напоминающими ушки. Очень декоративно, но капризно.",
        careRules = "Полив: умеренный, под корень. Не мокрить листья. Не переносит переувлажнение.",
        climateTips = "Освещение: яркое, но без прямых лучей. Температура: 15–22 °C. Влажность: умеренная. Безопасно для животных."
    )
)

@Composable
fun EncyclopediaScreen(
    onPlantClick: (EncyclopediaEntry) -> Unit = {}
) {
    LazyVerticalGrid(
        columns = GridCells.Fixed(2),
        modifier = Modifier
            .fillMaxSize()
            .padding(8.dp),
        verticalArrangement = Arrangement.spacedBy(8.dp),
        horizontalArrangement = Arrangement.spacedBy(8.dp)
    ) {
        items(encyclopediaEntries) { entry ->
            Card(
                modifier = Modifier
                    .fillMaxWidth()
                    .aspectRatio(1f),
                elevation = CardDefaults.cardElevation(defaultElevation = 4.dp),
                shape = MaterialTheme.shapes.medium
            ) {
                Column(
                    modifier = Modifier
                        .fillMaxSize()
                        .padding(12.dp),
                    verticalArrangement = Arrangement.SpaceBetween,
                    horizontalAlignment = Alignment.CenterHorizontally
                ) {
                    Text(
                        text = entry.name,
                        style = MaterialTheme.typography.titleMedium,
                        fontWeight = FontWeight.Bold,
                        modifier = Modifier.padding(bottom = 4.dp)
                    )
                    Button(
                        onClick = { onPlantClick(entry) }
                    ) {
                        Text("Подробнее")
                    }
                }
            }
        }
    }
}